<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Récupérer les offres d'emploi depuis les sites de recrutement</title>
    <link href="css/prism.css" rel="stylesheet">
    <link href="css/styles.css?v=4" rel="stylesheet">
    <link href="css/font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <header class="header_top">
      <h1 class="div_row"><a href="index.html">I. RACHDI</a> 
        <span class="header_social_links">
          <a href="https://twitter.com/IssamRachdi" title="Twitter @IssamRachdi"><i class="fa fa-twitter"></i></a>
          <a href="https://github.com/herch0" title="Github"><i class="fa fa-github"></i></a>
        </span>
      </h1>
    </header>
    <div class="container">
      <main>
        <article class="article_post" itemscope itemtype="http://schema.org/BlogPosting">
          <header class="page-header">
            <h1>
              <span itemprop="name">Récupérer les offres d'emploi depuis les sites de recrutement</span>
              <time itemprop="datePublished" class="post_date" datetime="2015-10-11T20:18">11 Octobre 2015</time>
            </h1>
          </header>
          <div itemprop="articleBody" class="post_body">
            <nav class="menu_interne float-right">
              <ul>
                <li><a href="#prerequis">Pré-requis</a></li>
              </ul>
            </nav>
            <p>Dans un article précédent, on avait vu comment <a href="recuperer-donnees-avito-ma-python.html">récupérer les annonces depuis avito.ma</a>. Dans cet article, on va utiliser les même outils, mais cette fois on va explorer les sites de recrutement, et plus précisemment <a href="http://rekrute.com">rekrute.com</a> et <a href="http://emploi.ma">emploi.ma</a>.</p>
            <p>Le principe, ainsi que les outils sont les même que dans le précédent article; on envoie une requête au site, puis on récupère le contenu, après, on extrait les données qu'on veut depuis le contenu html récupéré.</p>
            <h2>Pré-requis <a href='#prerequis' name='prerequis'>&para;</a></h2>
            <p>Pour arriver à notre fin, on aura besoin des outils suivants: </p>
            <ul>
              <li>Python bien sûr, version 3.</li>
              <li>Pip, pour installer facilement nos modules.</li>
              <li>Le module <a href="https://pypi.python.org/pypi/requests">requests</a>, qui nous facilitera la tâche pour l'envoi des requêtes HTTP.</li>
              <li>Le module <a href="https://pypi.python.org/pypi/beautifulsoup4">beautifulsoup4</a>, qui nous permettra de naviguer dans le contenu html et extraire les données qui nous intéressent.</li>
            </ul>
            <p>On va donc installer ces deux modules. Avec pip, l'installation de chaque module se fait facilement en une seule ligne: </p>
            <pre><code class='language-bash'>pip3 install requests
pip3 install beautifulsoup4</code></pre>
            <h2>Exploration du site emploi.ma <a href='#emploi_ma' name='emploi_ma'>&para;</a></h2>
            <p>Commençant maintenant l'exploration du site emploi.ma.</p>
            <p>Si on fait une recherche sur les métiers de l'"Informatique, nouvelles technologies", dans la région de Casablanca, on remarquera qu'une requête GET est envoyé à la page <code>http://www.emploi.ma/recherche-jobs-maroc</code>, avec un paramètre filters qui la valeur <code>tid:31 tid:58</code>. Ce paramètre est construit de la façon suivant <code>filter=tid:[id fonction] tid:[id ville]</code></p>
            <p>On peut maintenant envoyer une requête de recherche, et récupérer nos annonces.</p>
            <pre><code class='language-python'>import requests
params = {'filters': 'tid:31 tid:58'}
emploi_ma_url = 'http://www.emploi.ma/recherche-jobs-maroc'
r = requests.get(emploi_ma_url, params=params)</code></pre>
            <p>Le contenu HTML retourné est disponible dans la propriété text de la réponse <code>r</code> retourné.</p>
          </div>
        </article>
      </main>
      <section class="comments_section">
        <div id="list_comments"></div>
        <form id="form_comment" action="comments-ajx.php" method="POST" onsubmit="ajouter_comment(event)">
          <input type="hidden" id="req_action" name="req_action" value="ADD_COMMENT">
          <div class="div_col">
            <div class="div_row">
              <input type="text" id="name" name="name" placeholder="Nom">
              <input type="email" id="email" name="email" placeholder="Email">
            </div>
            <div class="div_row">
              <textarea id="commentaire" name="commentaire" placeholder="Commentaire" rows="6"></textarea>
            </div>
            <button class="btn btn-default block" id="add_comment">Ajouter commentaire</button>
          </div>
        </form>
      </section>
      <div class="clearfix"></div>
    </div>
    <script src="js/prism.js"></script>
    <script src="js/comment.js?v=2"></script>
  </body>
</html>
